<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Add Income</title>
    <link rel="stylesheet" href="dashboard.css">
    <script src="https://unpkg.com/react@17/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
<div id="root"></div>

<script type="text/babel">
    const { useState } = React;

    function AddIncome() {
        const [amount, setAmount] = useState('');
        const [frequency, setFrequency] = useState('monthly');

        const handleSubmit = async (e) => {
            e.preventDefault();
            const res = await fetch('/api/budget/income', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ amount: parseFloat(amount), frequency })
            });
            const data = await res.json();
            alert(data.message || data.error);
            window.location = 'dashboard.html';
        };

        return (
            <div className="form-container">
                <h2>Add Income</h2>
                <form onSubmit={handleSubmit}>
                    <label>Amount</label>
                    <input
                        type="number"
                        value={amount}
                        onChange={e => setAmount(e.target.value)}
                        required
                    />
                    <label>Frequency</label>
                    <select
                        value={frequency}
                        onChange={e => setFrequency(e.target.value)}
                    >
                        <option value="monthly">Monthly</option>
                        <option value="bi-monthly">Bi-Monthly</option>
                        <option value="yearly">Yearly</option>
                    </select>
                    <button type="submit">Submit</button>
                </form>
                <button onClick={() => (window.location = 'dashboard.html')}>
                    Cancel
                </button>
            </div>
        );
    }

    ReactDOM.render(<AddIncome />, document.getElementById('root'));
</script>
</body>
</html>
